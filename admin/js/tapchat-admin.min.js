!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=30)}([,function(e,t,r){"use strict";var n=r(5),i=r(13),a=Object.prototype.toString;function o(e){return"[object Array]"===a.call(e)}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===a.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,r)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var i,a,o,s;if(u(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),void 0===o)o=a[t]=r,++e._eventsCount;else if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=l(e))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):m(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){n.once&&e.removeEventListener(t,i),r(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)a(c,this,t);else{var u=c.length,l=m(c,u);for(r=0;r<u;++r)a(l[r],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,a,o;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";(function(t){var n=r(1),i=r(16),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t)&&(s=r(6)),s),transformRequest:[function(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(a)})),e.exports=c}).call(this,r(15))},function(e,t,r){e.exports=r(12)},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(1),i=r(17),a=r(19),o=r(20),s=r(21),c=r(7);e.exports=function(e){return new Promise((function(t,u){var l=e.data,d=e.headers;n.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",h=e.auth.password||"";d.Authorization="Basic "+btoa(f+":"+h)}if(p.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,u,n),p=null}},p.onerror=function(){u(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){u(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var v=r(22),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in p&&n.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),u(e),p=null)})),void 0===l&&(l=null),p.send(l)}))}},function(e,t,r){"use strict";var n=r(18);e.exports=function(e,t,r,i,a){var o=new Error(e);return n(o,t,r,i,a)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";(function(e){var n=r(2),i=r.n(n),a=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function u(e,t){return e(t={exports:{}},t.exports),t.exports}var l=u((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new x(n||[]);return a._invoke=function(e,t,r){var n=d;return function(i,a){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===i)throw a;return P()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=T(o,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?h:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,o),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",v={};function m(){}function g(){}function y(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==r&&n.call(k,a)&&(b=k);var _=y.prototype=m.prototype=Object.create(b);function M(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,s){var c=l(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function T(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function O(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return g.prototype=_.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},M(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new S(u(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},M(_),c(_,s,"Generator"),_[a]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function d(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var p=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){d(a,n,i,o,s,"next",e)}function s(e){d(a,n,i,o,s,"throw",e)}o(void 0)}))}},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e},g=u((function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(r,n)}e.exports=t})),y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)},b=u((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t})),w=function(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?h(e):t},k=u((function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(r)}e.exports=t})),_=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},M="function"==typeof Map,S="function"==typeof Set,T="function"==typeof WeakSet,j=Object.keys,C=function(e,t){return e&&"object"==typeof e&&t.add(e)},x=function(e,t,r,n){for(var i,a=0;a<e.length;a++)if(r((i=e[a])[0],t[0],n)&&r(i[1],t[1],n))return!0;return!1},O=function(e,t,r,n){for(var i=0;i<e.length;i++)if(r(e[i],t,n))return!0;return!1},P=function(e,t){return e===t||e!=e&&t!=t},E=function(e){return e.constructor===Object},A=function(e){return"function"==typeof e.then},F=function(e){return!(!e.$$typeof||!e._store)},L=function(e){return function(t){var r=e||t;return function(e,t,n){void 0===n&&(n=T?new WeakSet:Object.create({_values:[],add:function(e){this._values.push(e)},has:function(e){return!!~this._values.indexOf(e)}}));var i=n.has(e),a=n.has(t);return i||a?i&&a:(C(e,n),C(t,n),r(e,t,n))}}},B=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},R=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},N=function(e,t,r,n){var i,a=j(e),o=j(t);if(a.length!==o.length)return!1;for(var s=0;s<a.length;s++){if(i=a[s],!O(o,i,P))return!1;if(!("_owner"===i&&F(e)&&F(t)||r(e[i],t[i],n)))return!1}return!0},I=Array.isArray,D=function(e){var t="function"==typeof e?e(r):r;function r(e,r,n){if(P(e,r))return!0;var i=typeof e;if(i!==typeof r||"object"!==i||!e||!r)return!1;if(E(e)&&E(r))return N(e,r,t,n);var a=I(e),o=I(r);if(a||o)return a===o&&function(e,t,r,n){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t[i],n))return!1;return!0}(e,r,t,n);var s=e instanceof Date,c=r instanceof Date;if(s||c)return s===c&&P(e.getTime(),r.getTime());var u=e instanceof RegExp,l=r instanceof RegExp;if(u||l)return u===l&&function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}(e,r);if(A(e)||A(r))return e===r;if(M){var d=e instanceof Map,p=r instanceof Map;if(d||p)return d===p&&function(e,t,r,n){if(e.size!==t.size)return!1;for(var i=B(e),a=B(t),o=0;o<i.length;o++)if(!x(a,i[o],r,n)||!x(i,a[o],r,n))return!1;return!0}(e,r,t,n)}if(S){var f=e instanceof Set,h=r instanceof Set;if(f||h)return f===h&&function(e,t,r,n){if(e.size!==t.size)return!1;for(var i=R(e),a=R(t),o=0;o<i.length;o++)if(!O(a,i[o],r,n)||!O(i,a[o],r,n))return!1;return!0}(e,r,t,n)}return N(e,r,t,n)}return r},V=(D(L()),D(L(P)),D());D((function(){return P}));const U={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},q={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},z={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},J={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},W={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class G{static getFirstMatch(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){const n=G.getVersionPrecision(e),i=G.getVersionPrecision(t);let a=Math.max(n,i),o=0;const s=G.map([e,t],e=>{const t=a-G.getVersionPrecision(e),r=e+new Array(t+1).join(".0");return G.map(r.split("."),e=>new Array(20-e.length).join("0")+e).reverse()});for(r&&(o=a-Math.min(n,i)),a-=1;a>=o;){if(s[0][a]>s[1][a])return 1;if(s[0][a]===s[1][a]){if(a===o)return 0;a-=1}else if(s[0][a]<s[1][a])return-1}}static map(e,t){const r=[];let n;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r}static find(e,t){let r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){const n=e[r];if(t(n,r))return n}}static assign(e,...t){const r=e;let n,i;if(Object.assign)return Object.assign(e,...t);for(n=0,i=t.length;n<i;n+=1){const e=t[n];"object"==typeof e&&null!==e&&Object.keys(e).forEach(t=>{r[t]=e[t]})}return e}static getBrowserAlias(e){return U[e]}static getBrowserTypeByAlias(e){return q[e]||""}}const H=/version\/(\d+(\.?_?\d+)+)/i,K=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=G.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=G.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=G.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=G.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=G.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=G.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=G.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=G.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=G.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=G.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=G.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=G.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=G.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=G.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=G.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=G.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=G.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=G.getFirstMatch(H,e)||G.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=G.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=G.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=G.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=G.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=G.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=G.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=G.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=G.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=G.getFirstMatch(H,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:G.getFirstMatch(t,e),version:G.getSecondMatch(t,e)}}}];var Q=[{test:[/Roku\/DVP/],describe(e){const t=G.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:J.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=G.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:J.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=G.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=G.getWindowsVersionName(t);return{name:J.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe(e){const t=G.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return{name:J.iOS,version:t}}},{test:[/macintosh/i],describe(e){const t=G.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=G.getMacOSVersionName(t),n={name:J.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=G.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:J.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=G.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=G.getAndroidVersionName(t),n={name:J.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=G.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:J.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=G.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||G.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||G.getFirstMatch(/\bbb(\d+)/i,e);return{name:J.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=G.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:J.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=G.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:J.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:J.Linux})},{test:[/CrOS/],describe:()=>({name:J.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=G.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:J.PlayStation4,version:t}}}],$=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=G.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:z.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:z.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:z.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:()=>({type:z.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:z.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:z.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:z.tablet})},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=G.getFirstMatch(/(ipod|iphone)/i,e);return{type:z.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:z.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:z.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:z.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:z.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:z.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:z.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:z.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:z.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:z.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:z.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:z.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:z.tv})}],Y=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:W.Blink};const t=G.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:W.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:W.Trident},r=G.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:W.Presto},r=G.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:W.Gecko},r=G.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:W.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:W.WebKit},r=G.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class X{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=G.find(K,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=G.find(Q,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=G.find($,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=G.find(Y,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return G.assign({},this.parsedResult)}satisfies(e){const t={};let r=0;const n={};let i=0;if(Object.keys(e).forEach(a=>{const o=e[a];"string"==typeof o?(n[a]=o,i+=1):"object"==typeof o&&(t[a]=o,r+=1)}),r>0){const e=Object.keys(t),r=G.find(e,e=>this.isOS(e));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}const n=G.find(e,e=>this.isPlatform(e));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}}if(i>0){const e=Object.keys(n),t=G.find(e,e=>this.isBrowser(e,!0));if(void 0!==t)return this.compareVersion(n[t])}}isBrowser(e,t=!1){const r=this.getBrowserName().toLowerCase();let n=e.toLowerCase();const i=G.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r}compareVersion(e){let t=[0],r=e,n=!1;const i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(G.compareVersions(i,r,n))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}var Z="new",ee="loading",te="joining-meeting",re="joined-meeting",ne="left-meeting",ie="error",ae="unknown",oe="fullscreen",se="exited-fullscreen",ce="daily-custom-track",ue={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image"},le={PLAY:"play",PAUSE:"pause"},de=["jpg","png","jpeg"];function pe(){return!fe()&&"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function fe(){return"undefined"!=typeof navigator&&navigator.product&&"ReactNative"===navigator.product}function he(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function ve(){if(fe())return!1;if(!document)return!1;var e=document.createElement("iframe");return!!e.requestFullscreen||!!e.webkitRequestFullscreen}var me=["Chrome","Firefox"];function ge(){return!fe()&&(!((e=pe()).match(/Mobi/)||e.match(/Android/)||pe().match(/DailyAnd\//))&&me.includes(we()));var e}function ye(){return!!fe()||be()}function be(){return he()&&!function(){var e,t=we();if(!pe())return!0;switch(t){case"Chrome":return(e=ke()).major&&e.major>0&&e.major<61;case"Firefox":return(e=Se()).major<78;case"Safari":return(e=Me()).major<12;default:return!0}}()}function we(){if("undefined"!=typeof window){var e=pe();return _e()?"Safari":e.indexOf("Edge")>-1?"Edge":e.match(/Chrome\//)?"Chrome":e.indexOf("Safari")>-1?"Safari":e.indexOf("Firefox")>-1?"Firefox":e.indexOf("MSIE")>-1||e.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function ke(){var e=0,t=0,r=0,n=0,i=!1;if("undefined"!=typeof window){var a=pe(),o=a.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{e=parseInt(o[1]),t=parseInt(o[2]),r=parseInt(o[3]),n=parseInt(o[4]),i=a.indexOf("OPR/")>-1}catch(e){}}return{major:e,minor:t,build:r,patch:n,opera:i}}function _e(){return!!pe().match(/iPad|iPhone|iPod/i)&&he()}function Me(){var e=0,t=0,r=0;if("undefined"!=typeof window){var n=pe().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(n)try{e=parseInt(n[1]),t=parseInt(n[2]),r=parseInt(n[4])}catch(e){}else _e()&&(e=14,t=0,r=3)}return{major:e,minor:t,point:r}}function Se(){var e=0,t=0;if("undefined"!=typeof window){var r=pe().match(/Firefox\/(\d+).(\d+)/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2])}catch(e){}}return{major:e,minor:t}}function Te(){return Date.now()+Math.random().toString()}function je(){throw new Error("Method must be implemented in subclass")}function Ce(e){var t=e?new URL(e).origin:null;return!t||t.match(/https:\/\/[^.]+\.daily\.co/)?ye()?"https://c.daily.co/static/call-machine-object-bundle.js":"https://c.daily.co/static/call-machine-object-nosfu-bundle.js":(t||(console.warn("No baseUrl provided for call object bundle. Defaulting to production CDN..."),t="https://c.daily.co"),ye()?"".concat(t,"/static/call-machine-object-bundle.js"):"".concat(t,"/static/call-machine-object-nosfu-bundle.js"))}function xe(e){try{new URL(e)}catch(e){return!1}return!0}var Oe=function(){function e(){f(this,e)}return m(e,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,r){je()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,r){je()}},{key:"sendMessageToCallMachine",value:function(e,t,r,n){je()}},{key:"sendMessageToDailyJs",value:function(e,t,r){je()}},{key:"removeListener",value:function(e){je()}}]),e}();function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ae=function(e){y(r,Oe);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}(r);function r(){var e;return f(this,r),(e=t.call(this))._wrappedListeners={},e._messageCallbacks={},e}return m(r,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,r){var n=this,i=function(i){if(i.data&&"iframe-call-message"===i.data.what&&(!i.data.callFrameId||i.data.callFrameId===t)&&(!i.data.from||"module"!==i.data.from)){var a=Ee({},i.data);if(delete a.from,a.callbackStamp&&n._messageCallbacks[a.callbackStamp]){var o=a.callbackStamp;n._messageCallbacks[o].call(r,a),delete n._messageCallbacks[o]}delete a.what,delete a.callbackStamp,e.call(r,a)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,r){var n=function(n){if(!(!n.data||"iframe-call-message"!==n.data.what||!n.data.action||n.data.from&&"module"!==n.data.from||n.data.callFrameId&&t&&n.data.callFrameId!==t)){var i=n.data;e.call(r,i)}};this._wrappedListeners[e]=n,window.addEventListener("message",n)}},{key:"sendMessageToCallMachine",value:function(e,t,r,n){var i=Ee({},e);if(i.what="iframe-call-message",i.from="module",i.callFrameId=n,t){var a=Te();this._messageCallbacks[a]=t,i.callbackStamp=a}(r?r.contentWindow:window).postMessage(i,"*")}},{key:"sendMessageToDailyJs",value:function(e,t,r){e.what="iframe-call-message",e.callFrameId=r,e.from="embedded",(t?window:window.parent).postMessage(e,"*")}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,t,r){var n=Ee({},e);n.callFrameId=r,(t?t.contentWindow:window).postMessage(n,"*")}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,t){var r=function(r){if(r.data&&"iframe-call-message"===r.data.what&&(!r.data.callFrameId||r.data.callFrameId===t)&&(!r.data.from||"module"!==r.data.from)){var n=r.data;e(n)}};return this._wrappedListeners[e]=r,window.addEventListener("message",r),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}}]),r}();e.callMachineToDailyJsEmitter=e.callMachineToDailyJsEmitter||new n.EventEmitter,e.dailyJsToCallMachineEmitter=e.dailyJsToCallMachineEmitter||new n.EventEmitter;var Fe=function(t){y(n,Oe);var r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}(n);function n(){var e;return f(this,n),(e=r.call(this))._wrappedListeners={},e._messageCallbacks={},e}return m(n,[{key:"addListenerForMessagesFromCallMachine",value:function(t,r,n){this._addListener(t,e.callMachineToDailyJsEmitter,n,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(t,r,n){this._addListener(t,e.dailyJsToCallMachineEmitter,n,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(t,r){this._sendMessage(t,e.dailyJsToCallMachineEmitter,"sending message to call machine",r)}},{key:"sendMessageToDailyJs",value:function(t){this._sendMessage(t,e.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(t){var r=this._wrappedListeners[t];r&&(e.callMachineToDailyJsEmitter.removeListener("message",r),e.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[t])}},{key:"_addListener",value:function(e,t,r,n){var i=this,a=function(t){if(t.callbackStamp&&i._messageCallbacks[t.callbackStamp]){var n=t.callbackStamp;i._messageCallbacks[n].call(r,t),delete i._messageCallbacks[n]}e.call(r,t)};this._wrappedListeners[e]=a,t.addListener("message",a)}},{key:"_sendMessage",value:function(e,t,r,n){if(n){var i=Te();this._messageCallbacks[i]=n,e.callbackStamp=i}t.emit("message",e)}}]),n}(),Le=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}},Be=u((function(e){function t(r,n,i){return Le()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&g(i,r.prototype),i},t.apply(null,arguments)}e.exports=t})),Re=u((function(e){function t(r){var n="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Be(e,arguments,k(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),g(t,e)},t(r)}e.exports=t}));var Ne=function(){function e(){f(this,e),this._currentLoad=null}return m(e,[{key:"load",value:function(e,t,r,n){if(this.loaded)return window._dailyCallObjectSetup(t),void r(!0);!function(e){window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.callFrameId=e}(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Ie(e,t,(function(){r(!1)}),n),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel()}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),e}(),Ie=function(){function e(t,r,n,i){f(this,e),this._attemptsRemaining=3,this._currentAttempt=null,this._meetingOrBaseUrl=t,this._callFrameId=r,this._successCallback=n,this._failureCallback=i}return m(e,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new Ve(this._meetingOrBaseUrl,this._callFrameId,this._successCallback,(function t(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout((function(){e._currentAttempt.cancelled||(e._currentAttempt=new Ve(e._meetingOrBaseUrl,e._callFrameId,e._successCallback,t),e._currentAttempt.start())}),3e3))})),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),e}(),De=function(e){y(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}(r);function r(){return f(this,r),t.apply(this,arguments)}return r}(Re(Error)),Ve=function(){function e(t,r,n,i){f(this,e),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache="undefined"!=typeof iOSCallObjectBundleCache&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._meetingOrBaseUrl=t,this._callFrameId=r,this._successCallback=n,this._failureCallback=i}return m(e,[{key:"start",value:function(){var e=p(l.mark((function e(){var t;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=Ce(this._meetingOrBaseUrl),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),this._failureCallback("Failed to get call object bundle URL ".concat(t,": ").concat(e.t0)),e.abrupt("return");case 8:return e.next=10,this._tryLoadFromIOSCache(t);case 10:!e.sent&&this._loadFromNetwork(t);case 12:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:function(){var e=p(l.mark((function e(t){var r;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._iosCache){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,this._iosCache.get(t);case 5:if(r=e.sent,!this.cancelled){e.next=8;break}return e.abrupt("return",!0);case 8:if(r){e.next=10;break}return e.abrupt("return",!1);case 10:if(r.code){e.next=13;break}return this._refetchHeaders=r.refetchHeaders,e.abrupt("return",!1);case 13:return Function('"use strict";'+r.code)(),this.succeeded=!0,this._successCallback(),e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(2),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,this,[[2,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadFromNetwork",value:function(){var e=p(l.mark((function e(t){var r,n,i,a=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._networkTimeout=setTimeout((function(){a._networkTimedOut=!0,a._failureCallback("Timed out (>".concat(2e4," ms) when loading call object bundle ").concat(t))}),2e4),e.prev=1,r=this._refetchHeaders?{headers:this._refetchHeaders}:{},e.next=5,fetch(t,r);case 5:if(n=e.sent,clearTimeout(this._networkTimeout),!this.cancelled&&!this._networkTimedOut){e.next=9;break}throw new De;case 9:return e.next=11,this._getBundleCodeFromResponse(t,n);case 11:if(i=e.sent,!this.cancelled){e.next=14;break}throw new De;case 14:Function('"use strict";'+i)(),this._iosCache&&this._iosCache.set(t,i,n.headers),this.succeeded=!0,this._successCallback(),e.next=26;break;case 20:if(e.prev=20,e.t0=e.catch(1),clearTimeout(this._networkTimeout),!(e.t0 instanceof De||this.cancelled||this._networkTimedOut)){e.next=25;break}return e.abrupt("return");case 25:this._failureCallback("Failed to load call object bundle ".concat(t,": ").concat(e.t0));case 26:case"end":return e.stop()}}),e,this,[[1,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getBundleCodeFromResponse",value:function(){var e=p(l.mark((function e(t,r){var n;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.ok){e.next=4;break}return e.next=3,r.text();case 3:return e.abrupt("return",e.sent);case 4:if(!this._iosCache||304!==r.status){e.next=9;break}return e.next=7,this._iosCache.renew(t,r.headers);case 7:return n=e.sent,e.abrupt("return",n.code);case 9:throw new Error("Received ".concat(r.status," response"));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),Ue=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a},qe=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[++n];if(!1===t(i[s],s,i))break}return e},ze="object"==typeof c&&c&&c.Object===Object&&c,Je="object"==typeof self&&self&&self.Object===Object&&self,We=ze||Je||Function("return this")(),Ge=We.Symbol,He=Object.prototype,Ke=He.hasOwnProperty,Qe=He.toString,$e=Ge?Ge.toStringTag:void 0,Ye=Object.prototype.toString,Xe=Ge?Ge.toStringTag:void 0,Ze=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Xe&&Xe in Object(e)?function(e){var t=Ke.call(e,$e),r=e[$e];try{e[$e]=void 0;var n=!0}catch(e){}var i=Qe.call(e);return n&&(t?e[$e]=r:delete e[$e]),i}(e):function(e){return Ye.call(e)}(e)},et=function(e){return null!=e&&"object"==typeof e},tt=function(e){return et(e)&&"[object Arguments]"==Ze(e)},rt=Object.prototype,nt=rt.hasOwnProperty,it=rt.propertyIsEnumerable,at=tt(function(){return arguments}())?tt:function(e){return et(e)&&nt.call(e,"callee")&&!it.call(e,"callee")},ot=Array.isArray,st=function(){return!1},ct=u((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?We.Buffer:void 0,a=(i?i.isBuffer:void 0)||st;e.exports=a})),ut=/^(?:0|[1-9]\d*)$/,lt=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ut.test(e))&&e>-1&&e%1==0&&e<t},dt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},pt={};pt["[object Float32Array]"]=pt["[object Float64Array]"]=pt["[object Int8Array]"]=pt["[object Int16Array]"]=pt["[object Int32Array]"]=pt["[object Uint8Array]"]=pt["[object Uint8ClampedArray]"]=pt["[object Uint16Array]"]=pt["[object Uint32Array]"]=!0,pt["[object Arguments]"]=pt["[object Array]"]=pt["[object ArrayBuffer]"]=pt["[object Boolean]"]=pt["[object DataView]"]=pt["[object Date]"]=pt["[object Error]"]=pt["[object Function]"]=pt["[object Map]"]=pt["[object Number]"]=pt["[object Object]"]=pt["[object RegExp]"]=pt["[object Set]"]=pt["[object String]"]=pt["[object WeakMap]"]=!1;var ft,ht,vt=function(e){return function(t){return e(t)}},mt=u((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&ze.process,a=function(){try{return n&&n.require&&n.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a})),gt=mt&&mt.isTypedArray,yt=gt?vt(gt):function(e){return et(e)&&dt(e.length)&&!!pt[Ze(e)]},bt=Object.prototype.hasOwnProperty,wt=function(e,t){var r=ot(e),n=!r&&at(e),i=!r&&!n&&ct(e),a=!r&&!n&&!i&&yt(e),o=r||n||i||a,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var u in e)!t&&!bt.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||lt(u,c))||s.push(u);return s},kt=Object.prototype,_t=(ft=Object.keys,ht=Object,function(e){return ft(ht(e))}),Mt=Object.prototype.hasOwnProperty,St=function(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||kt)}(e))return _t(e);var t=[];for(var r in Object(e))Mt.call(e,r)&&"constructor"!=r&&t.push(r);return t},Tt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},jt=function(e){if(!Tt(e))return!1;var t=Ze(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ct=function(e){return null!=e&&dt(e.length)&&!jt(e)},xt=function(e){return Ct(e)?wt(e):St(e)},Ot=function(e,t){if(null==e)return e;if(!Ct(e))return function(e,t){return e&&qe(e,t,xt)}(e,t);for(var r=e.length,n=-1,i=Object(e);++n<r&&!1!==t(i[n],n,i););return e},Pt=function(e,t){var r=[];return Ot(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r},Et=function(e,t){return e===t||e!=e&&t!=t},At=function(e,t){for(var r=e.length;r--;)if(Et(e[r][0],t))return r;return-1},Ft=Array.prototype.splice;function Lt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Lt.prototype.clear=function(){this.__data__=[],this.size=0},Lt.prototype.delete=function(e){var t=this.__data__,r=At(t,e);return!(r<0||(r==t.length-1?t.pop():Ft.call(t,r,1),--this.size,0))},Lt.prototype.get=function(e){var t=this.__data__,r=At(t,e);return r<0?void 0:t[r][1]},Lt.prototype.has=function(e){return At(this.__data__,e)>-1},Lt.prototype.set=function(e,t){var r=this.__data__,n=At(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Bt,Rt=Lt,Nt=We["__core-js_shared__"],It=(Bt=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||""))?"Symbol(src)_1."+Bt:"",Dt=Function.prototype.toString,Vt=function(e){if(null!=e){try{return Dt.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Ut=/^\[object .+?Constructor\]$/,qt=Function.prototype,zt=Object.prototype,Jt=qt.toString,Wt=zt.hasOwnProperty,Gt=RegExp("^"+Jt.call(Wt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=function(e){return!(!Tt(e)||function(e){return!!It&&It in e}(e))&&(jt(e)?Gt:Ut).test(Vt(e))},Kt=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ht(r)?r:void 0},Qt=Kt(We,"Map"),$t=Kt(Object,"create"),Yt=Object.prototype.hasOwnProperty,Xt=Object.prototype.hasOwnProperty;function Zt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zt.prototype.clear=function(){this.__data__=$t?$t(null):{},this.size=0},Zt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Zt.prototype.get=function(e){var t=this.__data__;if($t){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Yt.call(t,e)?t[e]:void 0},Zt.prototype.has=function(e){var t=this.__data__;return $t?void 0!==t[e]:Xt.call(t,e)},Zt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$t&&void 0===t?"__lodash_hash_undefined__":t,this};var er=Zt,tr=function(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map};function rr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}rr.prototype.clear=function(){this.size=0,this.__data__={hash:new er,map:new(Qt||Rt),string:new er}},rr.prototype.delete=function(e){var t=tr(this,e).delete(e);return this.size-=t?1:0,t},rr.prototype.get=function(e){return tr(this,e).get(e)},rr.prototype.has=function(e){return tr(this,e).has(e)},rr.prototype.set=function(e,t){var r=tr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var nr=rr;function ir(e){var t=this.__data__=new Rt(e);this.size=t.size}ir.prototype.clear=function(){this.__data__=new Rt,this.size=0},ir.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ir.prototype.get=function(e){return this.__data__.get(e)},ir.prototype.has=function(e){return this.__data__.has(e)},ir.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Rt){var n=r.__data__;if(!Qt||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new nr(n)}return r.set(e,t),this.size=r.size,this};var ar=ir;function or(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new nr;++t<r;)this.add(e[t])}or.prototype.add=or.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},or.prototype.has=function(e){return this.__data__.has(e)};var sr=or,cr=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},ur=function(e,t){return e.has(t)},lr=function(e,t,r,n,i,a){var o=1&r,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var l=-1,d=!0,p=2&r?new sr:void 0;for(a.set(e,t),a.set(t,e);++l<s;){var f=e[l],h=t[l];if(n)var v=o?n(h,f,l,t,e,a):n(f,h,l,e,t,a);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!cr(t,(function(e,t){if(!ur(p,t)&&(f===e||i(f,e,r,n,a)))return p.push(t)}))){d=!1;break}}else if(f!==h&&!i(f,h,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d},dr=We.Uint8Array,pr=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r},fr=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},hr=Ge?Ge.prototype:void 0,vr=hr?hr.valueOf:void 0,mr=Object.prototype.propertyIsEnumerable,gr=Object.getOwnPropertySymbols,yr=gr?function(e){return null==e?[]:(e=Object(e),Ue(gr(e),(function(t){return mr.call(e,t)})))}:function(){return[]},br=function(e){return function(e,t,r){var n=t(e);return ot(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,xt,yr)},wr=Object.prototype.hasOwnProperty,kr=Kt(We,"DataView"),_r=Kt(We,"Promise"),Mr=Kt(We,"Set"),Sr=Kt(We,"WeakMap"),Tr=Vt(kr),jr=Vt(Qt),Cr=Vt(_r),xr=Vt(Mr),Or=Vt(Sr),Pr=Ze;(kr&&"[object DataView]"!=Pr(new kr(new ArrayBuffer(1)))||Qt&&"[object Map]"!=Pr(new Qt)||_r&&"[object Promise]"!=Pr(_r.resolve())||Mr&&"[object Set]"!=Pr(new Mr)||Sr&&"[object WeakMap]"!=Pr(new Sr))&&(Pr=function(e){var t=Ze(e),r="[object Object]"==t?e.constructor:void 0,n=r?Vt(r):"";if(n)switch(n){case Tr:return"[object DataView]";case jr:return"[object Map]";case Cr:return"[object Promise]";case xr:return"[object Set]";case Or:return"[object WeakMap]"}return t});var Er=Pr,Ar="[object Arguments]",Fr="[object Array]",Lr="[object Object]",Br=Object.prototype.hasOwnProperty,Rr=function(e,t,r,n,i,a){var o=ot(e),s=ot(t),c=o?Fr:Er(e),u=s?Fr:Er(t),l=(c=c==Ar?Lr:c)==Lr,d=(u=u==Ar?Lr:u)==Lr,p=c==u;if(p&&ct(e)){if(!ct(t))return!1;o=!0,l=!1}if(p&&!l)return a||(a=new ar),o||yt(e)?lr(e,t,r,n,i,a):function(e,t,r,n,i,a,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new dr(e),new dr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Et(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=pr;case"[object Set]":var c=1&n;if(s||(s=fr),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=2,o.set(e,t);var l=lr(s(e),s(t),n,i,a,o);return o.delete(e),l;case"[object Symbol]":if(vr)return vr.call(e)==vr.call(t)}return!1}(e,t,c,r,n,i,a);if(!(1&r)){var f=l&&Br.call(e,"__wrapped__"),h=d&&Br.call(t,"__wrapped__");if(f||h){var v=f?e.value():e,m=h?t.value():t;return a||(a=new ar),i(v,m,r,n,a)}}return!!p&&(a||(a=new ar),function(e,t,r,n,i,a){var o=1&r,s=br(e),c=s.length;if(c!=br(t).length&&!o)return!1;for(var u=c;u--;){var l=s[u];if(!(o?l in t:wr.call(t,l)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var p=!0;a.set(e,t),a.set(t,e);for(var f=o;++u<c;){var h=e[l=s[u]],v=t[l];if(n)var m=o?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===m?h===v||i(h,v,r,n,a):m)){p=!1;break}f||(f="constructor"==l)}if(p&&!f){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,r,n,i,a))},Nr=function e(t,r,n,i,a){return t===r||(null==t||null==r||!et(t)&&!et(r)?t!=t&&r!=r:Rr(t,r,n,i,e,a))},Ir=function(e){return e==e&&!Tt(e)},Dr=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},Vr=function(e){var t=function(e){for(var t=xt(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ir(i)]}return t}(e);return 1==t.length&&t[0][2]?Dr(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var c=(s=r[i])[0],u=e[c],l=s[1];if(o&&s[2]){if(void 0===u&&!(c in e))return!1}else{var d=new ar;if(n)var p=n(u,l,c,e,t,d);if(!(void 0===p?Nr(l,u,3,n,d):p))return!1}}return!0}(r,e,t)}},Ur=function(e){return"symbol"==typeof e||et(e)&&"[object Symbol]"==Ze(e)},qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zr=/^\w*$/,Jr=function(e,t){if(ot(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ur(e))||zr.test(e)||!qr.test(e)||null!=t&&e in Object(t)};function Wr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Wr.Cache||nr),r}Wr.Cache=nr;var Gr=Wr,Hr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kr=/\\(\\)?/g,Qr=function(e){var t=Gr((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Hr,(function(e,r,n,i){t.push(n?i.replace(Kr,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}(),$r=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},Yr=Ge?Ge.prototype:void 0,Xr=Yr?Yr.toString:void 0,Zr=function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(ot(t))return $r(t,e)+"";if(Ur(t))return Xr?Xr.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}(e)},en=function(e,t){return ot(e)?e:Jr(e,t)?[e]:Qr(Zr(e))},tn=function(e){if("string"==typeof e||Ur(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},rn=function(e,t){for(var r=0,n=(t=en(t,e)).length;null!=e&&r<n;)e=e[tn(t[r++])];return r&&r==n?e:void 0},nn=function(e,t){return null!=e&&t in Object(e)},an=function(e,t){return null!=e&&function(e,t,r){for(var n=-1,i=(t=en(t,e)).length,a=!1;++n<i;){var o=tn(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&dt(i)&&lt(o,i)&&(ot(e)||at(e))}(e,t,nn)},on=function(e,t){return Jr(e)&&Ir(t)?Dr(tn(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:rn(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?an(r,e):Nr(t,n,3)}},sn=function(e){return e},cn=function(e){return Jr(e)?function(e){return function(t){return null==t?void 0:t[e]}}(tn(e)):function(e){return function(t){return rn(t,e)}}(e)},un=function(e){return"function"==typeof e?e:null==e?sn:"object"==typeof e?ot(e)?on(e[0],e[1]):Vr(e):cn(e)},ln=function(e,t){return(ot(e)?Ue:Pt)(e,un(t))},dn=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,a=Ur(e),o=void 0!==t,s=null===t,c=t==t,u=Ur(t);if(!s&&!u&&!a&&e>t||a&&o&&c&&!s&&!u||n&&o&&c||!r&&c||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!c)return-1}return 0},pn=function(e,t,r){var n=-1;return t=$r(t.length?t:[sn],vt(un)),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(function(e,t){var r=-1,n=Ct(e)?Array(e.length):[];return Ot(e,(function(e,i,a){n[++r]=t(e,i,a)})),n}(e,(function(e,r,i){return{criteria:$r(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var c=dn(i[n],a[n]);if(c)return n>=s?c:c*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))},fn=function(e,t,r,n){return null==e?[]:(ot(t)||(t=null==t?[]:[t]),ot(r=n?void 0:r)||(r=null==r?[]:[r]),pn(e,t,r))},hn=function(e,t,r){return!0===gn(e.local,t,r)},vn=function(e,t,r){return e.local.streams&&e.local.streams[t]&&e.local.streams[t].stream&&e.local.streams[t].stream["get".concat("video"===r?"Video":"Audio","Tracks")]()[0]},mn=function(e,t,r,n){var i=yn(e,t,r,n);return i&&i.pendingTrack},gn=function(e,t,r){if(!e)return!1;var n=function(e){switch(e){case"avatar":return!0;case"staged":return e;default:return!!e}},i=e.public.subscribedTracks;return i&&i[t]?-1===["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(r)&&i[t].custom?[!0,"staged"].includes(i[t].custom)?n(i[t].custom):n(i[t].custom[r]):n(i[t][r]):!i||n(i.ALL)},yn=function(e,t,r,n){var i=fn(ln(e.streams,(function(e){return e.participantId===t&&e.type===r&&e.pendingTrack&&e.pendingTrack.kind===n})),"starttime","desc");return i&&i[0]},bn=function(e,t){var r=e.local.public.customTracks;if(r&&r[t])return r[t].track},wn=function(e,t,r,n){var i="soup-"+r,a=fn(ln(e.streams,(function(e){return e.participantId===t&&e.streamId===i&&e.pendingTrack&&e.pendingTrack.kind===n})),"starttime","desc");return a&&a[0]&&a[0].pendingTrack};function kn(e){for(var t=store.getState(),r=0,n=["cam","screen"];r<n.length;r++)for(var i=n[r],a=0,o=["video","audio"];a<o.length;a++){var s=o[a],c="cam"===i?s:"screen".concat(s.charAt(0).toUpperCase()+s.slice(1)),u=e.tracks[c];if(u){var l=e.local?vn(t,i,s):mn(t,e.session_id,i,s);"playable"===u.state&&(u.track=l),u.persistentTrack=l}}}function _n(e){try{var t=store.getState();for(var r in e.tracks)if(!Mn(r)){var n=e.tracks[r].kind;if(n){var i=e.tracks[r];if(i){var a=e.local?bn(t,r):wn(t,e.session_id,r,n);"playable"===i.state&&(e.tracks[r].track=a),i.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(e){console.error(e)}}function Mn(e){return["video","audio","screenVideo","screenAudio"].includes(e)}function Sn(e,t){var r=store.getState();if(e.local){if(e.audio)try{e.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],e.audioTrack||(e.audio=!1)}catch(e){}if(e.video)try{e.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],e.videoTrack||(e.video=!1)}catch(e){}if(e.screen)try{e.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],e.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){}}else{var n=!0;try{var i=r.participants[e.session_id];i&&i.public&&i.public.rtcType&&"peer-to-peer"===i.public.rtcType.impl&&i.private&&!["connected","completed"].includes(i.private.peeringState)&&(n=!1)}catch(e){console.error(e)}if(!n)return e.audio=!1,e.audioTrack=!1,e.video=!1,e.videoTrack=!1,e.screen=!1,void(e.screenTrack=!1);try{if(r.streams,e.audio&&hn(r,e.session_id,"cam-audio")){var a=mn(r,e.session_id,"cam","audio");a&&(t&&t.audioTrack&&t.audioTrack.id===a.id?e.audioTrack=a:a.muted||(e.audioTrack=a)),e.audioTrack||(e.audio=!1)}if(e.video&&hn(r,e.session_id,"cam-video")){var o=mn(r,e.session_id,"cam","video");o&&(t&&t.videoTrack&&t.videoTrack.id===o.id?e.videoTrack=o:o.muted||(e.videoTrack=o)),e.videoTrack||(e.video=!1)}if(e.screen&&hn(r,e.session_id,"screen-audio")){var s=mn(r,e.session_id,"screen","audio");s&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===s.id?e.screenAudioTrack=s:s.muted||(e.screenAudioTrack=s))}if(e.screen&&hn(r,e.session_id,"screen-video")){var c=mn(r,e.session_id,"screen","video");c&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===c.id?e.screenVideoTrack=c:c.muted||(e.screenVideoTrack=c))}e.screenVideoTrack||e.screenAudioTrack||(e.screen=!1)}catch(e){console.error("unexpected error matching up tracks",e)}}}function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cn="video",xn="voice",On={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Pn=["state","simulcastEncodings"],En={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},An={id:{iconPath:"string",label:"string",tooltip:"string"}},Fn={customTrayButtons:{validate:qn,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(An))},url:{validate:function(e){return"string"==typeof e},help:"url should be a string"},baseUrl:{validate:function(e){return"string"==typeof e},help:"baseUrl should be a string"},token:{validate:function(e){return"string"==typeof e},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(e){return window._dailyConfig||(window._dailyConfig={}),window._dailyConfig.experimentalGetUserMediaConstraintsModify=e.experimentalGetUserMediaConstraintsModify,delete e.experimentalGetUserMediaConstraintsModify,window._dailyConfig.userMediaVideoConstraints=e.userMediaVideoConstraints,delete e.userMediaVideoConstraints,!0}},reactNativeConfig:{validate:function(e){return function e(t,r){if(void 0===r)return!1;switch(b(r)){case"string":return b(t)===r;case"object":if("object"!==b(t))return!1;for(var n in t)if(!e(t[n],r[n]))return!1;return!0;default:return!1}}(e,En)},help:"reactNativeConfig should look like ".concat(JSON.stringify(En),", all fields optional")},lang:{validate:function(e){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","ru","sv","tr","user"].includes(e)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, ru, sv, tr, user"},userName:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(e,t){return t._preloadCache.videoDeviceId=e,!0}},audioSource:{validate:function(e,t){return t._preloadCache.audioDeviceId=e,!0}},subscribeToTracksAutomatically:{validate:function(e,t){return t._preloadCache.subscribeToTracksAutomatically=e,!0}},theme:{validate:function(e){var t=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],r=function(e){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!t.includes(i))return console.error('unsupported color "'.concat(i,'". Valid colors: ').concat(t.join(", "))),!1;if(!e[i].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(i,' theme color should be provided in valid hex color format. Received: "').concat(e[i],'"')),!1}return!0};return"object"===b(e)&&("light"in e&&"dark"in e||"colors"in e)?"light"in e&&"dark"in e?"colors"in e.light?"colors"in e.dark?r(e.light.colors)&&r(e.dark.colors):(console.error('Dark theme is missing "colors" property.',e),!1):(console.error('Light theme is missing "colors" property.',e),!1):r(e.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',e),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(e){if("grid"in e){var t=e.grid;if("maxTilesPerPage"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(t.maxTilesPerPage,".")),!1;if(t.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(t.minTilesPerPage,".")),!1;if(t.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(e){return In(e,{allowAllParticipantsKey:!1})},help:Un({allowAllParticipantsKey:!1})},inputSettings:{validate:function(e){return Dn(e)},help:Vn()},layout:{validate:function(e){return"custom-v1"===e||"browser"===e||"none"===e},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"}},Ln={styles:{validate:function(e){for(var t in e)if("cam"!==t&&"screen"!==t)return!1;if(e.cam)for(var t in e.cam)if("div"!==t&&"video"!==t)return!1;if(e.screen)for(var t in e.screen)if("div"!==t&&"video"!==t)return!1;return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(e,t,r){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(e)||!fe()&&"avatar"===e)return!0;var i=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var a in t)if("custom"===a){if(!n.includes(t[a])&&!e(t[a],!0))return!1}else{var o=!r&&!i.includes(a),s=!n.includes(t[a]);if(o||s)return!1}return!0}(e)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(fe()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,eject:!0};function Bn(e){var t={};for(var r in e)e[r]instanceof MediaStreamTrack?t[r]=ce:"dailyConfig"===r?(e[r].modifyLocalSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyLocalSdpHook=e[r].modifyLocalSdpHook),delete e[r].modifyLocalSdpHook),e[r].modifyRemoteSdpHook&&(window._dailyConfig&&(window._dailyConfig.modifyRemoteSdpHook=e[r].modifyRemoteSdpHook),delete e[r].modifyRemoteSdpHook),t[r]=e[r]):t[r]=e[r];return t}function Rn(){if(fe())throw new Error("This daily-js method is not currently supported in React Native")}function Nn(){if(!fe())throw new Error("This daily-js method is only supported in React Native")}function In(e,t){for(var r=t.allowAllParticipantsKey,n=function(e){var t=["local"];return r||t.push("*"),e&&!t.includes(e)},i=function(e){return!!(void 0===e.layer||Number.isInteger(e.layer)&&e.layer>=0||"inherit"===e.layer)},a=function(e){return!(!e||e.video&&!i(e.video)||e.screenVideo&&!i(e.screenVideo))},s=0,c=Object.entries(e);s<c.length;s++){var u=o(c[s],2),l=u[0],d=u[1];if(!n(l)||!a(d))return!1}return!0}function Dn(e){return!("object"!==b(e)||!e.video||"object"!==b(e.video)||!function(e){var t=["type","config","publish"];if(!e)return!1;if("object"!==b(e))return!1;if(0===Object.keys(e).length)return!1;if(e.type&&!function(e){return"string"==typeof e&&(!!Object.values(ue).includes(e)||(console.error("inputSettings video processor type invalid"),!1))}(e.type))return!1;if(void 0!==e.publish&&"boolean"!=typeof e.publish)return!1;if("boolean"==typeof e.publish&&console.warn("inputSettings.video.processor: publish key has been deprecated; it will be ignored"),e.config){if("object"!==b(e.config))return!1;if(!function(e,t){var r=Object.keys(t);if(0===r.length)return!0;var n="invalid object in inputSettings -> video -> processor -> config";switch(e){case ue.BGBLUR:return r.length>1||"strength"!==r[0]?(console.error(n),!1):!("number"!=typeof t.strength||t.strength<=0||t.strength>1||isNaN(t.strength))||(console.error("".concat(n,"; expected: {0 < strength <= 1}, got: ").concat(t.strength)),!1);case ue.BGIMAGE:return!(void 0!==t.source&&!function(e){return"default"===e.source?(e.type="default",!0):xe(e.source)?(e.type="url",t=e.source,r=new URL(t).pathname.split(".").at(-1).toLowerCase().trim(),!!de.includes(r)||(console.error("invalid image type; supported types: [".concat(de.join(", "),"]")),!1)):(n=e.source,i=Number(n),isNaN(i)||!Number.isInteger(i)||i<=0||i>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(e.type="daily-preselect",!0));var t,r,n,i}(t));default:return!0}}(e.type,e.config))return!1}return Object.keys(e).filter((function(e){return!t.includes(e)})).forEach((function(t){console.warn("invalid key inputSettings -> video -> processor : ".concat(t)),delete e[t]})),!0}(e.video.processor))}function Vn(){var e=Object.values(ue).join(" | ");return"inputSettings must be of the form: { video: { processor: [ ".concat(e," ] }, config?: {} }")}function Un(e){var t=e.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat("base").concat(t?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function qn(e){if(e&&"object"!==b(e)||Array.isArray(e))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(An),".")),!1;if(e)for(var t=0,r=Object.entries(e);t<r.length;t++)for(var n=o(r[t],1)[0],i=0,a=Object.entries(e[n]);i<a.length;i++){var s=o(a[i],2),c=s[0],u=s[1];if("iconPath"===c&&!xe(u))return console.error("customTrayButton ".concat(c," should be a url.")),!1;if(b(u)!==An.id[c])return console.error("customTrayButton ".concat(c," should be a ").concat(An.id[c],".")),!1}return!0}function zn(e){if("string"!=typeof e)throw new Error('url parameter must be "string" type')}function Jn(e){if("object"!==b(e))throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(!e.state||!Object.values(le).includes(e.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(le))}function Wn(e,t,r){return!("number"!=typeof e||e<t||e>r)}function Gn(e){for(var t in e)if(!Pn.includes(t))throw new Error("Invalid key ".concat(t,", valid keys are: ").concat(Pn));if(e.simulcastEncodings){if(!(e.simulcastEncodings instanceof Array))throw new Error('simulcastEncodings must be "Array"');if(!Wn(e.simulcastEncodings.length,0,3))throw new Error('"simulcastEncodings" not in range. valid range 1 to 3 layers');e.simulcastEncodings.every((function(e){for(var t in e){if(!On.hasOwnProperty(t))throw new Error("Invalid key ".concat(t,", valid keys are:")+Object.keys(On));if("number"!=typeof e[t])throw new Error("simulcastEncodings[].".concat(t,' must be "number"'));var r=On[t],n=r.min,i=r.max;if(!Wn(e[t],n,i))throw new Error("simulcastEncodings[].".concat(t," value not in range. valid range:        ").concat(n," to ").concat(i))}if(!e.hasOwnProperty("maxBitrate"))throw new Error("simulcastEncodings[].maxBitrate is not specified")}))}}t.a=function(e){y(r,i.a);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f(this,r),n=t.call(this),_(h(n),"handleNativeAppActiveStateChange",(function(e){n.disableReactNativeAutoDeviceManagement("video")||(e?n.camUnmutedBeforeLosingNativeActiveState&&n.setLocalVideo(!0):(n.camUnmutedBeforeLosingNativeActiveState=n.localVideo(),n.camUnmutedBeforeLosingNativeActiveState&&n.setLocalVideo(!1)))})),_(h(n),"handleNativeAudioFocusChange",(function(e){n.disableReactNativeAutoDeviceManagement("audio")||(n._hasNativeAudioFocus=e,n.toggleParticipantAudioBasedOnNativeAudioFocus(),n._hasNativeAudioFocus?n.micUnmutedBeforeLosingNativeAudioFocus&&n.setLocalAudio(!0):(n.micUnmutedBeforeLosingNativeAudioFocus=n.localAudio(),n.setLocalAudio(!1)))})),i.dailyJsVersion=r.version(),n._iframe=e,n._callObjectMode="none"===i.layout&&!n._iframe,n._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null},n._callObjectMode&&(window._dailyPreloadCache=n._preloadCache),void 0!==i.showLocalVideo?n._callObjectMode?console.error("showLocalVideo is not available in call object mode"):n._showLocalVideo=!!i.showLocalVideo:n._showLocalVideo=!0,void 0!==i.showParticipantsBar?n._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):n._showParticipantsBar=!!i.showParticipantsBar:n._showParticipantsBar=!0,void 0!==i.customTrayButtons?n._callObjectMode?console.error("customTrayButtons is not available in call object mode"):n._customTrayButtons=i.customTrayButtons:n._customTrayButtons={},void 0!==i.activeSpeakerMode?n._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):n._activeSpeakerMode=!!i.activeSpeakerMode:n._activeSpeakerMode=!1,i.receiveSettings?n._callObjectMode?n._receiveSettings=i.receiveSettings:console.error("receiveSettings is only available in call object mode"):n._receiveSettings={},n._inputSettings={},i.inputSettings&&(n._inputSettings=i.inputSettings),n.validateProperties(i),n.properties=jn({},i),n._callObjectLoader=n._callObjectMode?new Ne:null,n._meetingState=Z,n._isPreparingToJoin=!1,n._accessState={access:ae},n._nativeInCallAudioMode=Cn,n._participants={},n._rmpPlayerState={},n._waitingParticipants={},n._inputEventsOn={},n._network={threshold:"good",quality:100},n._activeSpeaker={},n._callFrameId=Te(),n._messageChannel=fe()?new Fe:new Ae,n._iframe&&(n._iframe.requestFullscreen?n._iframe.addEventListener("fullscreenchange",(function(e){document.fullscreenElement===n._iframe?(n.emit(oe,{action:oe}),n.sendMessageToCallMachine({action:oe})):(n.emit(se,{action:se}),n.sendMessageToCallMachine({action:se}))})):n._iframe.webkitRequestFullscreen&&n._iframe.addEventListener("webkitfullscreenchange",(function(e){document.webkitFullscreenElement===n._iframe?(n.emit(oe,{action:oe}),n.sendMessageToCallMachine({action:oe})):(n.emit(se,{action:se}),n.sendMessageToCallMachine({action:se}))}))),fe()){var a=n.nativeUtils();a.addAudioFocusChangeListener&&a.removeAudioFocusChangeListener&&a.addAppActiveStateChangeListener&&a.removeAppActiveStateChangeListener||console.warn("expected (add|remove)(AudioFocus|AppActiveState)ChangeListener to be available in React Native"),n._hasNativeAudioFocus=!0,a.addAudioFocusChangeListener(n.handleNativeAudioFocusChange),a.addAppActiveStateChangeListener(n.handleNativeAppActiveStateChange)}return n._messageChannel.addListenerForMessagesFromCallMachine(n.handleMessageFromCallMachine,n._callFrameId,h(n)),n}return m(r,null,[{key:"supportedBrowser",value:function(){if(fe())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!1,supportsSfu:!0,supportsVideoProcessing:!1};var e=class{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new X(e,t)}static parse(e){return new X(e).getResult()}static get BROWSER_MAP(){return q}static get ENGINE_MAP(){return W}static get OS_MAP(){return J}static get PLATFORMS_MAP(){return z}}.getParser(pe());return{supported:!!be(),mobile:"mobile"===e.getPlatformType(),name:e.getBrowserName(),version:e.getBrowserVersion(),supportsFullscreen:!!ve(),supportsScreenShare:!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&function(e,t){if(!e||!t)return!0;switch(e){case"Chrome":return t.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(13===t.major&&0===t.minor&&0===t.point);case"Firefox":return t.major>=67}return!0}(we(),function(){switch(we()){case"Chrome":return ke();case"Safari":return Me();case"Firefox":return Se();case"Edge":return function(){var e=0,t=0;if("undefined"!=typeof window){var r=pe().match(/Edge\/(\d+).(\d+)/);if(r)try{e=parseInt(r[1]),t=parseInt(r[2])}catch(e){}}return{major:e,minor:t}}()}}())),supportsSfu:!!ye(),supportsVideoProcessing:ge()}}},{key:"version",value:function(){return"0.25.0"}},{key:"createCallObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.layout="none",new r(null,e)}},{key:"wrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Rn(),!e||!e.contentWindow||"string"!=typeof e.src)throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return t.layout||(t.customLayout?t.layout="custom-v1":t.layout="browser"),new r(e,t)}},{key:"createFrame",value:function(e,t){var n,i;Rn(),e&&t?(n=e,i=t):e&&e.append?(n=e,i={}):(n=document.body,i=e||{});var a=i.iframeStyle;a||(a=n===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var o=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?o.allow="microphone, camera":o.allow="microphone; camera; autoplay; display-capture",o.style.visibility="hidden",n.appendChild(o),o.style.visibility=null,Object.keys(a).forEach((function(e){return o.style[e]=a[e]})),i.layout||(i.customLayout?i.layout="custom-v1":i.layout="browser");try{return new r(o,i)}catch(e){throw n.removeChild(o),e}}},{key:"createTransparentFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rn();var t=document.createElement("iframe");return t.allow="microphone; camera; autoplay",t.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: 0;\n      pointer-events: none;\n    ",document.body.appendChild(t),e.layout||(e.layout="custom-v1"),r.wrap(t,e)}}]),m(r,[{key:"destroy",value:function(){var e=p(l.mark((function e(){var t,r,n;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,![re,ee].includes(this._meetingState)){e.next=4;break}return e.next=4,this.leave();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:(t=this._iframe)&&(r=t.parentElement)&&r.removeChild(t),this._messageChannel.removeListener(this.handleMessageFromCallMachine),fe()&&((n=this.nativeUtils()).removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),n.removeAppActiveStateChangeListener(this.handleNativeAppActiveStateChange)),this.resetMeetingDependentVars();case 13:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadCss",value:function(e){var t=e.bodyClass,r=e.cssFile,n=e.cssText;return Rn(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(r),bodyClass:t,cssText:n}),this}},{key:"iframe",value:function(){return Rn(),this._iframe}},{key:"meetingState",value:function(){return this._meetingState}},{key:"accessState",value:function(){if(!this._callObjectMode)throw new Error("accessState() currently only supported in call object mode");return this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"waitingParticipants",value:function(){if(!this._callObjectMode)throw new Error("waitingParticipants() currently only supported in call object mode");return this._waitingParticipants}},{key:"validateParticipantProperties",value:function(e,t){for(var r in t){if(!Ln[r])throw new Error("unrecognized updateParticipant property ".concat(r));if(Ln[r].validate&&!Ln[r].validate(t[r],this,this._participants[e]))throw new Error(Ln[r].help)}}},{key:"updateParticipant",value:function(e,t){return this._participants.local&&this._participants.local.session_id===e&&(e="local"),e&&t&&this._participants[e]&&(this.validateParticipantProperties(e,t),this.sendMessageToCallMachine({action:"update-participant",id:e,properties:t})),this}},{key:"updateParticipants",value:function(e){var t=this._participants.local&&this._participants.local.session_id;for(var r in e)r===t&&(r="local"),r&&e[r]&&(this._participants[r]||"*"===r)?this.validateParticipantProperties(r,e[r]):(console.warn("unrecognized participant in updateParticipants: ".concat(r)),delete e[r]);return this.sendMessageToCallMachine({action:"update-participants",participants:e}),this}},{key:"updateWaitingParticipant",value:function(){var e=p(l.mark((function e(){var t,r,n=this,i=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"",r=i.length>1&&void 0!==i[1]?i[1]:{},this._callObjectMode){e.next=4;break}throw new Error("updateWaitingParticipant() currently only supported in call object mode");case 4:if(this._meetingState===re){e.next=6;break}throw new Error("updateWaitingParticipant() only supported for joined meetings");case 6:if("string"==typeof t&&"object"===b(r)){e.next=8;break}throw new Error("updateWaitingParticipant() must take an id string and a updates object");case 8:return e.abrupt("return",new Promise((function(e,i){n.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:t,updates:r},(function(t){t.error&&i(t.error),t.id||i(new Error("unknown error in updateWaitingParticipant()")),e({id:t.id})}))})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateWaitingParticipants",value:function(){var e=p(l.mark((function e(){var t,r=this,n=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},this._callObjectMode){e.next=3;break}throw new Error("updateWaitingParticipants() currently only supported in call object mode");case 3:if(this._meetingState===re){e.next=5;break}throw new Error("updateWaitingParticipants() only supported for joined meetings");case 5:if("object"===b(t)){e.next=7;break}throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");case 7:return e.abrupt("return",new Promise((function(e,n){r.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:t},(function(t){t.error&&n(t.error),t.ids||n(new Error("unknown error in updateWaitingParticipants()")),e({ids:t.ids})}))})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestAccess",value:function(){var e=p(l.mark((function e(){var t,r,n,i,a,o=this,s=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.access,n=void 0===r?{level:"full"}:r,i=t.name,a=void 0===i?"":i,this._callObjectMode){e.next=3;break}throw new Error("requestAccess() currently only supported in call object mode");case 3:if(this._meetingState===re){e.next=5;break}throw new Error("requestAccess() only supported for joined meetings");case 5:return e.abrupt("return",new Promise((function(e,t){o.sendMessageToCallMachine({action:"daily-method-request-access",access:n,name:a},(function(r){r.error&&t(r.error),r.access||t(new Error("unknown error in requestAccess()")),e({access:r.access,granted:r.granted})}))})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"localAudio",value:function(){return this._participants.local?this._participants.local.audio:null}},{key:"localVideo",value:function(){return this._participants.local?this._participants.local.video:null}},{key:"setLocalAudio",value:function(e){return this.sendMessageToCallMachine({action:"local-audio",state:e}),this}},{key:"setLocalVideo",value:function(e){return this.sendMessageToCallMachine({action:"local-video",state:e}),this}},{key:"getReceiveSettings",value:function(){var e=p(l.mark((function e(t){var r,n,i,a=this,o=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n=r.showInheritedValues,i=void 0!==n&&n,this._callObjectMode){e.next=3;break}throw new Error("getReceiveSettings() only supported in call object mode");case 3:e.t0=b(t),e.next="string"===e.t0?6:"undefined"===e.t0?7:8;break;case 6:return e.abrupt("return",new Promise((function(e){a.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:t,showInheritedValues:i},(function(t){e(t.receiveSettings)}))})));case 7:return e.abrupt("return",this._receiveSettings);case 8:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments');case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateReceiveSettings",value:function(){var e=p(l.mark((function e(t){var r=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._callObjectMode){e.next=2;break}throw new Error("updateReceiveSettings() only supported in call object mode");case 2:if(In(t,{allowAllParticipantsKey:!0})){e.next=4;break}throw new Error(Un({allowAllParticipantsKey:!0}));case 4:if(this._meetingState===re){e.next=6;break}throw new Error("updateReceiveSettings() is only allowed when joined. To specify receive settings earlier, use the receiveSettings config property.");case 6:return e.abrupt("return",new Promise((function(e){r.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:t},(function(t){e({receiveSettings:t.receiveSettings})}))})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInputSettings",value:function(){var e=this;return new Promise((function(t){t(e._inputSettings)}))}},{key:"updateInputSettings",value:function(){var e=p(l.mark((function e(t){var r=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!Dn(t))return console.error(Vn()),void n(Vn());r.sendMessageToCallMachine({action:"update-input-settings",inputSettings:t},(function(t){t.error?n(t.error):e({inputSettings:t.inputSettings})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setBandwidth",value:function(e){var t=e.kbs,r=e.trackConstraints;return Rn(),this.sendMessageToCallMachine({action:"set-bandwidth",kbs:t,trackConstraints:r}),this}},{key:"getDailyLang",value:function(){var e=this;return Rn(),new Promise(function(){var t=p(l.mark((function t(r){var n;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(e){delete e.action,delete e.callbackStamp,r(e)},e.sendMessageToCallMachine({action:"get-daily-lang"},n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setDailyLang",value:function(e){return Rn(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:e}),this}},{key:"getMeetingSession",value:function(){var e=p(l.mark((function e(){var t=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._meetingState===re){e.next=2;break}throw new Error("getMeetingSession() is only allowed when joined");case 2:return e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(r){var n;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){delete e.action,delete e.callbackStamp,delete e.callFrameId,r(e)},t.sendMessageToCallMachine({action:"get-meeting-session"},n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserName",value:function(e,t){var r=this;return this.properties.userName=e,new Promise(function(){var n=p(l.mark((function n(i){var a;return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=function(e){delete e.action,delete e.callbackStamp,i(e)},r.sendMessageToCallMachine({action:"set-user-name",name:null!=e?e:"",thisMeetingOnly:fe()||!!t&&!!t.thisMeetingOnly},a);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"startCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._callObjectMode)throw new Error("startCamera() currently only supported in call object mode");if([te,re].includes(this._meetingState))throw new Error("startCamera() not supported after joining a meeting: did you mean to use setLocalAudio() and/or setLocalVideo() instead?");return new Promise(function(){var r=p(l.mark((function r(n,i){var a;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=function(e){delete e.action,delete e.callbackStamp,n(e)},!e.needsLoad()){r.next=12;break}return r.prev=2,r.next=5,e.load(t);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),i(r.t0);case 10:r.next=13;break;case 12:e.validateProperties(t);case 13:e.sendMessageToCallMachine({action:"start-camera",properties:Bn(e.properties),preloadCache:Bn(e._preloadCache)},a);case 14:case"end":return r.stop()}}),r,null,[[2,7]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"cycleCamera",value:function(){var e=this;return new Promise((function(t,r){e.sendMessageToCallMachine({action:"cycle-camera"},(function(e){t({device:e.device})}))}))}},{key:"cycleMic",value:function(){var e=this;return Rn(),new Promise((function(t,r){e.sendMessageToCallMachine({action:"cycle-mic"},(function(e){t({device:e.device})}))}))}},{key:"getCameraFacingMode",value:function(){var e=this;return Nn(),new Promise((function(t,r){e.sendMessageToCallMachine({action:"get-camera-facing-mode"},(function(e){t(e.facingMode)}))}))}},{key:"setInputDevices",value:function(e){var t=e.audioDeviceId,r=e.videoDeviceId,n=e.audioSource,i=e.videoSource;return console.warn("setInputDevices() is deprecated: instead use setInputDevicesAsync(), which returns a Promise"),this.setInputDevicesAsync({audioDeviceId:t,videoDeviceId:r,audioSource:n,videoSource:i}),this}},{key:"setInputDevicesAsync",value:function(){var e=p(l.mark((function e(t){var r,n,i,a,o=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.audioDeviceId,n=t.videoDeviceId,i=t.audioSource,a=t.videoSource,Rn(),void 0!==i&&(r=i),void 0!==a&&(n=a),r&&(this._preloadCache.audioDeviceId=r),n&&(this._preloadCache.videoDeviceId=n),!this._callObjectMode||!this.needsLoad()){e.next=8;break}return e.abrupt("return",{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}});case 8:return r instanceof MediaStreamTrack&&(r=ce),n instanceof MediaStreamTrack&&(n=ce),e.abrupt("return",new Promise((function(e){o.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:r,videoDeviceId:n},(function(t){delete t.action,delete t.callbackStamp,t.returnPreloadCache?e({camera:{deviceId:o._preloadCache.videoDeviceId},mic:{deviceId:o._preloadCache.audioDeviceId},speaker:{deviceId:o._preloadCache.outputDeviceId}}):e(t)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setOutputDevice",value:function(e){var t=e.outputDeviceId;return Rn(),t&&(this._preloadCache.outputDeviceId=t),this._callObjectMode&&this._meetingState!==re&&!this._didPreAuth?(console.warn("setOutputDevice() not supported before preAuth() or join()"),this):(this.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:t}),this)}},{key:"getInputDevices",value:function(){var e=p(l.mark((function e(){var t=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rn(),!this._callObjectMode||!this.needsLoad()){e.next=3;break}return e.abrupt("return",{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}});case 3:return e.abrupt("return",new Promise((function(e,r){t.sendMessageToCallMachine({action:"get-input-devices"},(function(r){delete r.action,delete r.callbackStamp,r.returnPreloadCache?e({camera:{deviceId:t._preloadCache.videoDeviceId},mic:{deviceId:t._preloadCache.audioDeviceId},speaker:{deviceId:t._preloadCache.outputDeviceId}}):e(r)}))})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nativeInCallAudioMode",value:function(){return Nn(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(e){if(Nn(),[Cn,xn].includes(e)){if(e!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=e,!this.disableReactNativeAutoDeviceManagement("audio")&&this.isMeetingPendingOrOngoing(this._meetingState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",e)}},{key:"preAuth",value:function(){var e=p(l.mark((function e(){var t,r,n,i=this,a=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},this._callObjectMode){e.next=3;break}throw new Error("preAuth() currently only supported in call object mode");case 3:if(![te,re].includes(this._meetingState)){e.next=5;break}throw new Error("preAuth() not supported after joining a meeting");case 5:if(!this.needsLoad()){e.next=8;break}return e.next=8,this.load(t);case 8:if(t.url){e.next=10;break}throw new Error("preAuth() requires at least a url to be provided");case 10:if(r=Ce(t.url),n=Ce(this.properties.url||this.properties.baseUrl),r===n){e.next=14;break}throw new Error("url in preAuth() has a different bundle url than the one loaded (".concat(n," -> ").concat(r,")"));case 14:return this.validateProperties(t),this.properties=jn(jn({},this.properties),t),e.abrupt("return",new Promise((function(e,t){i.sendMessageToCallMachine({action:"daily-method-preauth",properties:Bn(i.properties)},(function(r){return r.error?t(r.error):r.access?(i._didPreAuth=!0,void e({access:r.access})):t(new Error("unknown error in preAuth()"))}))})));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=p(l.mark((function e(t){var r=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.needsLoad()){e.next=2;break}return e.abrupt("return");case 2:if(t&&(this.validateProperties(t),this.properties=jn(jn({},this.properties),t)),this._callObjectMode||this.properties.url){e.next=5;break}throw new Error("can't load iframe meeting because url property isn't set");case 5:this.updateMeetingState(ee);try{this.emit("loading",{action:"loading"})}catch(e){console.log("could not emit 'loading'",e)}if(!this._callObjectMode){e.next=11;break}return e.abrupt("return",new Promise((function(e,t){r._callObjectLoader.cancel(),r._callObjectLoader.load(r.properties.url||r.properties.baseUrl,r._callFrameId,(function(t){r.updateMeetingState("loaded"),t&&r.emit("loaded",{action:"loaded"}),e()}),(function(e,n){r.emit("load-attempt-failed",{action:"load-attempt-failed",errorMsg:e}),n||(r.updateMeetingState(ie),r.resetMeetingDependentVars(),r.emit("error",{action:"error",errorMsg:e}),t(e))}))})));case 11:return this._iframe.src=this.assembleMeetingUrl(),e.abrupt("return",new Promise((function(e,t){r._loadedCallback=function(n){if(r._meetingState!==ie){for(var i in r.updateMeetingState("loaded"),(r.properties.cssFile||r.properties.cssText)&&r.loadCss(r.properties),r._inputEventsOn)r.sendMessageToCallMachine({action:"register-input-handler",on:i});e()}else t(n)}})));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"join",value:function(){var e=p(l.mark((function e(){var t,r,n,i,a=this,o=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},r=!1,!this.needsLoad()){e.next=15;break}return this.updateIsPreparingToJoin(!0),e.prev=4,e.next=7,this.load(t);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),this.updateIsPreparingToJoin(!1),e.abrupt("return",Promise.reject(e.t0));case 13:e.next=42;break;case 15:if(r=!(!this.properties.cssFile&&!this.properties.cssText),!this._didPreAuth){e.next=25;break}if(!t.url||t.url===this.properties.url){e.next=21;break}return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),e.abrupt("return",Promise.reject());case 21:if(!t.token||t.token===this.properties.token){e.next=25;break}return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),e.abrupt("return",Promise.reject());case 25:if(!t.url){e.next=40;break}if(!this._callObjectMode){e.next=36;break}if(n=Ce(t.url),i=Ce(this.properties.url||this.properties.baseUrl),n===i){e.next=33;break}return console.error("url in join() has a different bundle url than the one loaded (".concat(i," -> ").concat(n,")")),this.updateIsPreparingToJoin(!1),e.abrupt("return",Promise.reject());case 33:this.properties.url=t.url,e.next=40;break;case 36:if(!t.url||t.url===this.properties.url){e.next=40;break}return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(t.url,")")),this.updateIsPreparingToJoin(!1),e.abrupt("return",Promise.reject());case 40:this.validateProperties(t),this.properties=jn(jn({},this.properties),t);case 42:if(void 0!==t.showLocalVideo&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!t.showLocalVideo),void 0!==t.showParticipantsBar&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!t.showParticipantsBar),this._meetingState!==re&&this._meetingState!==te){e.next=48;break}return console.warn("already joined meeting, call leave() before joining again"),this.updateIsPreparingToJoin(!1),e.abrupt("return");case 48:this.updateMeetingState(te,!1);try{this.emit("joining-meeting",{action:"joining-meeting"})}catch(e){console.log("could not emit 'joining-meeting'",e)}return this.sendMessageToCallMachine({action:"join-meeting",properties:Bn(this.properties),preloadCache:Bn(this._preloadCache)}),e.abrupt("return",new Promise((function(e,t){a._joinedCallback=function(n,i){if(a._meetingState!==ie){if(a.updateMeetingState(re),n)for(var o in n)a._callObjectMode&&(kn(n[o]),_n(n[o]),Sn(n[o],a._participants[o])),a._participants[o]=jn({},n[o]),a.toggleParticipantAudioBasedOnNativeAudioFocus();r&&a.loadCss(a.properties),e(n)}else t(i)}})));case 52:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=p(l.mark((function e(){var t=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(t._callObjectLoader&&!t._callObjectLoader.loaded){t._callObjectLoader.cancel(),t.updateMeetingState(ne),t.resetMeetingDependentVars();try{t.emit(ne,{action:ne})}catch(e){console.log("could not emit 'left-meeting'",e)}e()}else t._meetingState===ne||t._meetingState===ie?e():(t._leftCallback=function(){t._meetingState!==ie&&t.updateMeetingState(ne),t.resetMeetingDependentVars(),e()},t.sendMessageToCallMachine({action:"leave-meeting"}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"startScreenShare",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rn(),e.mediaStream&&(this._preloadCache.screenMediaStream=e.mediaStream,e.mediaStream=ce),this.sendMessageToCallMachine({action:"local-screen-start",captureOptions:e})}},{key:"stopScreenShare",value:function(){Rn(),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(jn({action:"local-recording-start"},e))}},{key:"updateRecording",value:function(e){var t=e.layout,r=void 0===t?{preset:"default"}:t;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:r})}},{key:"stopRecording",value:function(){this.sendMessageToCallMachine({action:"local-recording-stop"})}},{key:"startLiveStreaming",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessageToCallMachine(jn({action:"daily-method-start-live-streaming"},e))}},{key:"updateLiveStreaming",value:function(e){var t=e.layout,r=void 0===t?{preset:"default"}:t;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:r})}},{key:"stopLiveStreaming",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-live-streaming"})}},{key:"startRemoteMediaPlayer",value:function(){var e=p(l.mark((function e(t){var r,n,i,a=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.url,n=t.settings,i=void 0===n?{state:le.PLAY}:n,e.prev=1,zn(r),Jn(i),Gn(i),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(1),console.error("invalid argument Error: ".concat(e.t0)),console.error('startRemoteMediaPlayer arguments must be of the form: \n  { url: "playback url", \n  settings?: \n  {state: "play"|"pause", simulcastEncodings?: [{}] } }'),e.t0;case 12:return e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(t,n){var o;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=function(e){e.error?n({error:e.error,errorMsg:e.errorMsg}):t({session_id:e.session_id,remoteMediaPlayerState:{state:e.state,settings:e.settings}})},a.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:r,settings:i},o);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopRemoteMediaPlayer",value:function(){var e=p(l.mark((function e(t){var r=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new Error(" remotePlayerID must be of type string");case 2:return e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(n,i){var a;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){e.error?i({error:e.error,errorMsg:e.errorMsg}):n()},r.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:t},a);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRemoteMediaPlayer",value:function(){var e=p(l.mark((function e(t){var r,n,i=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.session_id,n=t.settings,e.prev=1,Jn(n),e.next=10;break;case 5:throw e.prev=5,e.t0=e.catch(1),console.error("invalid argument Error: ".concat(e.t0)),console.error('updateRemoteMediaPlayer arguments must be of the form: \n  session_id: "participant session", \n  { settings?: {state: "play"|"pause"} }'),e.t0;case 10:return e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(t,a){var o;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=function(e){e.error?a({error:e.error,errorMsg:e.errorMsg}):t({session_id:e.session_id,remoteMediaPlayerState:{state:e.state,settings:e.settings}})},i.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:r,settings:n},o);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"startTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-start-transcription"})}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"getNetworkStats",value:function(){var e=this;return this._meetingState!==re?{stats:{latest:{}}}:new Promise((function(t,r){e.sendMessageToCallMachine({action:"get-calc-stats"},(function(r){t(jn({stats:r.stats},e._network))}))}))}},{key:"getActiveSpeaker",value:function(){return Rn(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(e){return Rn(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:e}),this}},{key:"activeSpeakerMode",value:function(){return Rn(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(e){if(this._meetingState!==re)throw new Error("setSubscribeToTracksAutomatically() is only allowed when joined");return this._preloadCache.subscribeToTracksAutomatically=e,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:e}),this}},{key:"enumerateDevices",value:function(){var e=p(l.mark((function e(){var t,r=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._callObjectMode){e.next=5;break}return e.next=3,navigator.mediaDevices.enumerateDevices();case 3:return t=e.sent,e.abrupt("return",{devices:t.map((function(e){return JSON.parse(JSON.stringify(e))}))});case 5:return e.abrupt("return",new Promise((function(e,t){r.sendMessageToCallMachine({action:"enumerate-devices"},(function(t){e({devices:t.devices})}))})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendAppMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";if(JSON.stringify(e).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:e,to:t}),this}},{key:"addFakeParticipant",value:function(e){return Rn(),this.sendMessageToCallMachine(jn({action:"add-fake-participant"},e)),this}},{key:"setShowNamesMode",value:function(e){return Rn(),e&&"always"!==e&&"never"!==e?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:e}),this)}},{key:"setShowLocalVideo",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Rn(),"boolean"!=typeof e?(console.error("setShowLocalVideo only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowLocalVideo is not available in callObject mode"),this):this._meetingState!==re?(console.error("the meeting must be joined before calling setShowLocalVideo"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:e}),this._showLocalVideo=e,this)}},{key:"showLocalVideo",value:function(){return Rn(),this._callObjectMode?(console.error("showLocalVideo is not available in callObject mode"),this):this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Rn(),"boolean"!=typeof e?(console.error("setShowParticipantsBar only accepts a boolean value"),this):this._callObjectMode?(console.error("setShowParticipantsBar is not available in callObject mode"),this):this._meetingState!==re?(console.error("the meeting must be joined before calling setShowParticipantsBar"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:e}),this._showParticipantsBar=e,this)}},{key:"showParticipantsBar",value:function(){return Rn(),this._callObjectMode?(console.error("showParticipantsBar is not available in callObject mode"),this):this._showParticipantsBar}},{key:"customTrayButtons",value:function(){return Rn(),this._callObjectMode?(console.error("customTrayButtons is not available in callObject mode"),this):this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(e){return Rn(),this._callObjectMode?(console.error("updateCustomTrayButtons is not available in callObject mode"),this):this._meetingState!==re?(console.error("the meeting must be joined before calling updateCustomTrayButtons"),this):qn(e)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:e}),this._customTrayButtons=e,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(An))),this)}},{key:"theme",value:function(){return this._callObjectMode?(console.error("theme is not available in callObject mode"),this):this.properties.theme}},{key:"setTheme",value:function(e){var t=this;return new Promise((function(r,n){if(t._callObjectMode)n("setTheme is not available in callObject mode");else try{t.validateProperties({theme:e}),t.properties.theme=jn({},e),t.sendMessageToCallMachine({action:"set-theme",theme:t.properties.theme});try{t.emit("theme-updated",{action:"theme-updated",theme:t.properties.theme})}catch(e){console.log("could not emit 'theme-updated'",e)}r(t.properties.theme)}catch(e){n(e)}}))}},{key:"detectAllFaces",value:function(){var e=this;return Rn(),new Promise((function(t,r){e.sendMessageToCallMachine({action:"detect-all-faces"},(function(e){delete e.action,delete e.callbackStamp,t(e)}))}))}},{key:"requestFullscreen",value:function(){var e=p(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rn(),this._iframe&&!document.fullscreenElement&&ve()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this._iframe.requestFullscreen;case 6:if(!e.sent){e.next=10;break}this._iframe.requestFullscreen(),e.next=11;break;case 10:this._iframe.webkitRequestFullscreen();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("could not make video call fullscreen",e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"exitFullscreen",value:function(){Rn(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"room",value:function(){var e=p(l.mark((function e(){var t,r,n,i=this,a=arguments;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.includeRoomConfigDefaults,n=void 0===r||r,this._meetingState!==re&&!this._didPreAuth){e.next=5;break}return e.abrupt("return",new Promise((function(e,t){i.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:n},(function(t){delete t.action,delete t.callbackStamp,e(t)}))})));case 5:if(!this.properties.url){e.next=7;break}return e.abrupt("return",{roomUrlPendingJoin:this.properties.url});case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"geo",value:function(){var e=p(l.mark((function e(){return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(t,r){var n,i;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,fetch("https://gs.daily.co/_ks_/x-swsl/:");case 4:return n=e.sent,e.next=7,n.json();case 7:i=e.sent,t({current:i.geo}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("geo lookup failed",e.t0),t({current:""});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setNetworkTopology",value:function(){var e=p(l.mark((function e(t){var r=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn(),e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(n,i){var a;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){e.error?i({error:e.error}):n({workerId:e.workerId})},r.sendMessageToCallMachine({action:"set-network-topology",opts:t},a);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNetworkTopology",value:function(){var e=p(l.mark((function e(){var t=this;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=p(l.mark((function e(r,n){var i;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){e.error?n({error:e.error}):r({topology:e.topology})},t.sendMessageToCallMachine({action:"get-network-topology"},i);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setPlayNewParticipantSound",value:function(e){if(Rn(),"number"!=typeof e&&!0!==e&&!1!==e)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(e));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:e})}},{key:"on",value:function(e,t){return this._inputEventsOn[e]={},this.sendMessageToCallMachine({action:"register-input-handler",on:e}),i.a.prototype.on.call(this,e,t)}},{key:"once",value:function(e,t){return this._inputEventsOn[e]={},this.sendMessageToCallMachine({action:"register-input-handler",on:e}),i.a.prototype.once.call(this,e,t)}},{key:"off",value:function(e,t){return delete this._inputEventsOn[e],this.sendMessageToCallMachine({action:"register-input-handler",off:e}),i.a.prototype.off.call(this,e,t)}},{key:"validateProperties",value:function(e){for(var t in e){if(!Fn[t])throw new Error("unrecognized property '".concat(t,"'"));if(Fn[t].validate&&!Fn[t].validate(e[t],this))throw new Error("property '".concat(t,"': ").concat(Fn[t].help))}}},{key:"assembleMeetingUrl",value:function(){var e=jn(jn({},this.properties),{},{emb:this._callFrameId,embHref:encodeURIComponent(window.location.href)}),t=e.url.match(/\?/)?"&":"?";return e.url+t+Object.keys(Fn).filter((function(t){return Fn[t].queryString&&void 0!==e[t]})).map((function(t){return"".concat(Fn[t].queryString,"=").concat(e[t])})).join("&")}},{key:"needsLoad",value:function(){return[Z,ee,ne,ie].includes(this._meetingState)}},{key:"sendMessageToCallMachine",value:function(e,t){this._messageChannel.sendMessageToCallMachine(e,t,this._iframe,this._callFrameId)}},{key:"forwardPackagedMessageToCallMachine",value:function(e){this._messageChannel.forwardPackagedMessageToCallMachine(e,this._iframe,this._callFrameId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(e,this._callFrameId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(e)}},{key:"handleMessageFromCallMachine",value:function(e){switch(e.action){case"iframe-ready-for-launch-config":this.sendMessageToCallMachine(jn({action:"iframe-launch-config"},this.properties));break;case"loaded":this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null);try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}break;case"joined-meeting":this._joinedCallback&&(this._joinedCallback(e.participants),this._joinedCallback=null);try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}break;case"participant-joined":case"participant-updated":if(this._meetingState===ne)return;if(e.participant&&e.participant.session_id){var t=e.participant.local?"local":e.participant.session_id;this._callObjectMode&&(kn(e.participant),_n(e.participant),Sn(e.participant,this._participants[t]));try{this.maybeEventTrackStopped(this._participants[t],e.participant,"audioTrack"),this.maybeEventTrackStopped(this._participants[t],e.participant,"videoTrack"),this.maybeEventTrackStopped(this._participants[t],e.participant,"screenVideoTrack"),this.maybeEventTrackStopped(this._participants[t],e.participant,"screenAudioTrack"),this.maybeEventTrackStarted(this._participants[t],e.participant,"audioTrack"),this.maybeEventTrackStarted(this._participants[t],e.participant,"videoTrack"),this.maybeEventTrackStarted(this._participants[t],e.participant,"screenVideoTrack"),this.maybeEventTrackStarted(this._participants[t],e.participant,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(this._participants[t],e.participant),this.maybeEventTrackStartedForCustomTracks(this._participants[t],e.participant),this.maybeEventRecordingStopped(this._participants[t],e.participant),this.maybeEventRecordingStarted(this._participants[t],e.participant)}catch(e){console.error("track events error",e)}if(!this.compareEqualForParticipantUpdateEvent(e.participant,this._participants[t])){this._participants[t]=jn({},e.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus();try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}}}break;case"participant-left":if(e.participant&&e.participant.session_id){var r=this._participants[e.participant.session_id];r&&(this.maybeEventTrackStopped(r,null,"audioTrack"),this.maybeEventTrackStopped(r,null,"videoTrack"),this.maybeEventTrackStopped(r,null,"screenVideoTrack"),this.maybeEventTrackStopped(r,null,"screenAudioTrack"),this.maybeEventTrackStoppedForCustomTracks(r,null)),delete this._participants[e.participant.session_id];try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}}break;case"access-state-updated":var n={access:e.access};if(e.awaitingAccess&&(n.awaitingAccess=e.awaitingAccess),!V(this._accessState,n)){this._accessState=n;try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}}break;case"meeting-session-updated":if(e.meetingSession)try{delete e.callFrameId,this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}break;case"error":this._iframe&&!e.preserveIframe&&(this._iframe.src=""),this.updateMeetingState(ie),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(e.errorMsg),this._loadedCallback=null),this._joinedCallback&&(this._joinedCallback(null,e.errorMsg),this._joinedCallback=null);try{e.preserveIframe;var i=s(e,["preserveIframe"]);this.emit(e.action,i)}catch(t){console.log("could not emit",e,t)}break;case"left-meeting":this._leftCallback&&(this._leftCallback(),this._leftCallback=null);try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}break;case"input-event":var a=this._participants[e.session_id];a||(a=e.session_id===this._participants.local.session_id?this._participants.local:{});try{this.emit(e.event.type,{action:e.event.type,event:e.event,participant:jn({},a)})}catch(t){console.log("could not emit",e,t)}break;case"network-quality-change":var o=e.threshold,c=e.quality;if(o!==this._network.threshold||c!==this._network.quality){this._network.quality=c,this._network.threshold=o;try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}}break;case"active-speaker-change":var u=e.activeSpeaker;if(this._activeSpeaker.peerId!==u.peerId){this._activeSpeaker.peerId=u.peerId;try{this.emit(e.action,{action:e.action,activeSpeaker:this._activeSpeaker})}catch(t){console.log("could not emit",e,t)}}break;case"show-local-video-changed":if(this._callObjectMode)return;var l=e.show;this._showLocalVideo=l;try{this.emit(e.action,{action:e.action,show:l})}catch(t){console.log("could not emit",e,t)}break;case"active-speaker-mode-change":var d=e.enabled;if(this._activeSpeakerMode!==d){this._activeSpeakerMode=d;try{this.emit(e.action,{action:e.action,enabled:this._activeSpeakerMode})}catch(t){console.log("could not emit",e,t)}}break;case"waiting-participant-added":case"waiting-participant-updated":case"waiting-participant-removed":this._waitingParticipants=e.allWaitingParticipants;try{this.emit(e.action,{action:e.action,participant:e.participant})}catch(t){console.log("could not emit",e,t)}break;case"receive-settings-updated":if(!V(this._receiveSettings,e.receiveSettings)){this._receiveSettings=e.receiveSettings;try{this.emit(e.action,{action:e.action,receiveSettings:e.receiveSettings})}catch(t){console.log("could not emit",e,t)}}break;case"input-settings-updated":if(!V(this._inputSettings,e.inputSettings)){this._inputSettings=e.inputSettings;try{this.emit(e.action,{action:e.action,inputSettings:e.inputSettings})}catch(t){console.log("could not emit",e,t)}}break;case"remote-media-player-started":var p=e.session_id;this._rmpPlayerState[p]=e.playerState,this.emitDailyJSEvent(e);break;case"remote-media-player-stopped":delete this._rmpPlayerState[e.session_id],this.emitDailyJSEvent(e);break;case"remote-media-player-updated":var f=e.session_id,h=this._rmpPlayerState[f];h&&this.compareEqualForRMPUpdateEvent(h,e.remoteMediaPlayerState)||(this._rmpPlayerState[f]=e.remoteMediaPlayerState,this.emitDailyJSEvent(e));break;case"custom-button-click":this.emitDailyJSEvent(e);break;case"recording-started":case"recording-stopped":case"recording-stats":case"recording-error":case"recording-upload-completed":case"transcription-started":case"transcription-stopped":case"transcription-error":case"started-camera":case"camera-error":case"app-message":case"local-screen-share-started":case"local-screen-share-stopped":case"network-connection":case"recording-data":case"live-streaming-started":case"live-streaming-stopped":case"live-streaming-error":case"nonfatal-error":case"lang-updated":try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(e,t){var r="record";if(e&&!t.local&&!1===t[r]&&e[r]!==t[r])try{this.emit("recording-stopped",{action:"recording-stopped"})}catch(e){console.log("could not emit",e)}}},{key:"maybeEventRecordingStarted",value:function(e,t){var r="record";if(e&&!t.local&&!0===t[r]&&e[r]!==t[r])try{this.emit("recording-started",{action:"recording-started"})}catch(e){console.log("could not emit",e)}}},{key:"maybeEventTrackStopped",value:function(e,t,r){if(e&&(e[r]&&"ended"===e[r].readyState||e[r]&&(!t||!t[r])||e[r]&&e[r].id!==t[r].id))try{this.emit("track-stopped",{action:"track-stopped",track:e[r],participant:t})}catch(e){console.log("could not emit",e)}}},{key:"maybeEventCustomTrackStopped",value:function(e,t,r,n){if(e&&(!n||!n.remoteMediaPlayerState||"playing"!=n.remoteMediaPlayerState.state&&"paused"!=n.remoteMediaPlayerState.state)&&(e&&"ended"===e.readyState||e&&!t||e&&e.id!==t.id))try{this.emit("track-stopped",{action:"track-stopped",track:e,participant:r})}catch(e){console.log("maybeEventCustomTrackStopped: could not emit",e)}}},{key:"maybeEventCustomTrackStarted",value:function(e,t,r){if(t&&!e||t&&"ended"===e.readyState||t&&t.id!==e.id)try{this.emit("track-started",{action:"track-started",track:t,participant:r})}catch(e){console.log("maybeEventCustomTrackStarted: could not emit",e)}}},{key:"maybeEventTrackStarted",value:function(e,t,r){if(t[r]&&(!e||!e[r])||t[r]&&"ended"===e[r].readyState||t[r]&&t[r].id!==e[r].id)try{this.emit("track-started",{action:"track-started",track:t[r],participant:t})}catch(e){console.log("could not emit",e)}}},{key:"maybeEventTrackStoppedForCustomTracks",value:function(e,t){if(e)for(var r in e.tracks)Mn(r)||this.maybeEventCustomTrackStopped(e.tracks[r].track,t&&t.tracks[r]?t.tracks[r].track:null,e,t)}},{key:"maybeEventTrackStartedForCustomTracks",value:function(e,t){if(t)for(var r in t.tracks)Mn(r)||this.maybeEventCustomTrackStarted(e&&e.tracks[r]?e.tracks[r].track:null,t.tracks[r].track,t)}},{key:"compareEqualForRMPUpdateEvent",value:function(e,t){return e.state===t.state}},{key:"emitDailyJSEvent",value:function(e){try{this.emit(e.action,e)}catch(t){console.log("could not emit",e,t)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(e,t){return!(!V(e,t)||e.videoTrack&&t.videoTrack&&(e.videoTrack.id!==t.videoTrack.id||e.videoTrack.muted!==t.videoTrack.muted||e.videoTrack.enabled!==t.videoTrack.enabled)||e.audioTrack&&t.audioTrack&&(e.audioTrack.id!==t.audioTrack.id||e.audioTrack.muted!==t.audioTrack.muted||e.audioTrack.enabled!==t.audioTrack.enabled))}},{key:"nativeUtils",value:function(){return fe()?"undefined"==typeof DailyNativeUtils?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(e){this.updateMeetingState(this._meetingState,e)}},{key:"updateMeetingState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._isPreparingToJoin;if(e!==this._meetingState||t!==this._isPreparingToJoin){var r=this._meetingState,n=this._isPreparingToJoin;this._meetingState=e,this._isPreparingToJoin=t;var i=this.isMeetingPendingOrOngoing(r,n),a=this.isMeetingPendingOrOngoing(this._meetingState,this._isPreparingToJoin);i!==a&&(this.updateKeepDeviceAwake(a),this.updateDeviceAudioMode(a),this.updateShowAndroidOngoingMeetingNotification(a),this.updateNoOpRecordingEnsuringBackgroundContinuity(a))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:ae},this._receiveSettings={},this._inputSettings={},this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(e){fe()&&this.nativeUtils().setKeepDeviceAwake(e,this._callFrameId)}},{key:"updateDeviceAudioMode",value:function(e){if(fe()&&!this.disableReactNativeAutoDeviceManagement("audio")){var t=e?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(t)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(e){if(fe()&&this.nativeUtils().setShowOngoingMeetingNotification){var t,r,n,i;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var a=this.properties.reactNativeConfig.androidInCallNotification;t=a.title,r=a.subtitle,n=a.iconName,i=a.disableForCustomOverride}i&&(e=!1),this.nativeUtils().setShowOngoingMeetingNotification(e,t,r,n,this._callFrameId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(e){fe()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(e)}},{key:"isMeetingPendingOrOngoing",value:function(e,t){return[te,re].includes(e)||t}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){if(fe()){var e=store.getState();for(var t in e.streams){var r=e.streams[t];r&&r.pendingTrack&&"audio"===r.pendingTrack.kind&&(r.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(e){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[e]}},{key:"absoluteUrl",value:function(e){if(void 0!==e){var t=document.createElement("a");return t.href=e,t.href}}},{key:"sayHello",value:function(){var e="hello, world.";return console.log(e),e}}]),r}()}).call(this,r(11))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n=r(1),i=r(5),a=r(14),o=r(3);function s(e){var t=new a(e),r=i(a.prototype.request,t);return n.extend(r,a.prototype,t),n.extend(r,t),r}var c=s(o);c.Axios=a,c.create=function(e){return s(n.merge(o,e))},c.Cancel=r(9),c.CancelToken=r(28),c.isCancel=r(8),c.all=function(e){return Promise.all(e)},c.spread=r(29),e.exports=c,e.exports.default=c},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){"use strict";var n=r(3),i=r(1),a=r(23),o=r(24);function s(e){this.defaults=e,this.interceptors={request:new a,response:new a}}s.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){s.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}})),e.exports=s},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||l||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(1);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";var n=r(1);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(n.isURLSearchParams(t))a=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},function(e,t,r){"use strict";var n=r(1),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,a,o={};return e?(n.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},function(e,t,r){"use strict";var n=r(1);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(1);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(1);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){"use strict";var n=r(1),i=r(25),a=r(8),o=r(3),s=r(26),c=r(27);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(1);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(9);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n,i,a,o,s=r(4),c=r.n(s),u=r(10),l={};jQuery(document).ready((function(){o=io("https://socket.tapchat.me",{secure:!0}),jQuery(".acceptCall").click((async function(){try{a=jQuery(this).data("req_id"),i=jQuery(this).data("part_id");var e=new FormData;let r={action:"tapchat_join_operator",participant_id:i,tapchatn:tapchat_data.tapchatn};for(var t in r)e.append(t,r[t]);const o=await c.a.post(tapchat_data.ajax_url,e);o.data.status?(l.url=o.data.url,l.token=o.data.token,document.getElementById("faceWpRef").classList.remove("hidden"),(n=u.a.createFrame(faceWpRef,{userName:tapchat_data.user,iframeStyle:{width:"100%",height:"36rem"},layoutConfig:{grid:{minTilesPerPage:2,maxTilesPerPage:2}}})).join({url:l.url,showLeaveButton:!0,token:l.token}),n.on("joining-meeting",d).on("participant-left",p).on("left-meeting",p).on("error",handleError).on("camera-error",handleDeviceError)):alert(o.data.error)}catch(e){}})),jQuery("#tapchat_exclude_pages,#tapchat_include_pages").select2()}));var d=()=>{o.emit("call_accept",{call_url:l.url,caller_req_id:a,caller_token:l.token})},p=async()=>{let e={action:"tapchat_leave_customer",participant_id:i,tapchatn:tapchat_data.tapchatn};var t=new FormData;for(var r in e)t.append(r,e[r]);try{if("error"==(await c.a.post(tapchat_data.ajax_url,t)).data.status)alert("Not able to Update status");else{n.leave();var o=document.getElementById("faceWpRef");o.innerHTML="",o.classList.add("hidden"),jQuery('[data-req_id="'+a+'"]').remove()}}catch(e){}}}]);